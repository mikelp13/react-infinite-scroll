{"version":3,"sources":["components/BookList.js","components/Search.js","hooks/useDebounce.js","hooks/useBookSearch.js","components/Loader.js","components/App.js","index.js"],"names":["BookList","books","lastBookElementRef","className","map","book","index","length","ref","Search","inputValue","onChange","type","value","placeholder","useDebounce","timeout","useState","debouncedValue","setDebouncedValue","useEffect","timeoutId","setTimeout","clearTimeout","useBookSearch","query","pageNumber","loading","setLoading","error","setError","setBooks","hasMore","setHasMore","axios","method","url","params","q","page","then","res","prev","Set","data","docs","title","catch","message","finally","override","css","Loader","color","size","App","setInputValue","setPageNumber","debouncedQuery","observer","useRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","e","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6ea091e4.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst BookList = ({ books, lastBookElementRef }) => (\r\n\r\n  <ul className=\"list-group list-group-flush \">\r\n    {books.map((book, index) => {\r\n      if (books.length === index + 1) {\r\n        return (\r\n          <li ref={lastBookElementRef} key={book} className=\"list-group-item\">\r\n            {book}\r\n          </li>\r\n        );\r\n      } else {\r\n        return (\r\n          <li key={book} className=\"list-group-item \">\r\n            {book}\r\n          </li>\r\n        );\r\n      }\r\n    })}\r\n  </ul>\r\n);\r\nexport default BookList\r\n\r\n\r\n","import React from \"react\";\r\n\r\nconst Search = ({ inputValue, onChange }) => {\r\n  return (\r\n    <div className=\"form-group has-search\">\r\n      <h1 className=\"text-center text-primary mb-4\">\r\n        Find books in our library\r\n      </h1>\r\n      <span className=\"fa fa-search form-control-feedback\"></span>\r\n      <input\r\n        type=\"text\"\r\n        value={inputValue}\r\n        onChange={onChange}\r\n        className=\"form-control border-end-0 border rounded-pill\"\r\n        placeholder=\"Enter your book title\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import { useEffect, useState } from \"react\";\r\n\r\nconst useDebounce = (value, timeout) => {\r\n  let [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    let timeoutId = setTimeout(() => {\r\n      // console.log(\"setting debounced value\");\r\n      setDebouncedValue(value);\r\n    }, timeout);\r\n\r\n    return () => {\r\n      // console.log(\"clear timeout\");\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, [value, timeout]);\r\n\r\n  return debouncedValue;\r\n};\r\n\r\nexport default useDebounce;\r\n","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst useBookSearch = (query, pageNumber) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [books, setBooks] = useState([]);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setBooks([]);\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    axios({\r\n      method: \"GET\",\r\n      url: \"https://openlibrary.org/search.json\",\r\n      params: { q: query, page: pageNumber },\r\n    })\r\n      .then((res) => {\r\n        setBooks((prev) => {\r\n          return [\r\n            ...new Set([...prev, ...res.data.docs.map((book) => book.title)]),\r\n          ];\r\n        });\r\n        setHasMore(res.data.docs.length > 0);\r\n      })\r\n      .catch((error) => setError(error.message))\r\n      .finally(() => setLoading(false));\r\n    // eslint-disable-next-line\r\n  }, [query, pageNumber]);\r\n\r\n  return { loading, error, books, hasMore };\r\n};\r\n\r\nexport default useBookSearch;\r\n","import React from \"react\";\r\nimport { css } from \"@emotion/core\";\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\n\r\nconst override = css`\r\n  display: block;\r\n  margin: 0 auto;\r\n  margin-top: 30px;\r\n`;\r\n\r\nconst Loader = () => {\r\n  return <FadeLoader color=\"#0C8671\" loading=\"true\" css={override} size={30} />;\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useRef, useState, useCallback } from \"react\";\nimport BookList from \"./BookList\";\nimport Search from \"./Search\";\nimport useDebounce from \"../hooks/useDebounce\";\nimport useBookSearch from \"../hooks/useBookSearch\";\nimport Loader from \"./Loader\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nconst App = () => {\n  const [inputValue, setInputValue] = useState(\"\");\n  const [pageNumber, setPageNumber] = useState(1);\n\n  const debouncedQuery = useDebounce(inputValue, 1000)\n\n  const { books, hasMore, loading, error } = useBookSearch(debouncedQuery, pageNumber);\n\n  // infinite scroll realisation\n  const observer = useRef();\n\n  const lastBookElementRef = useCallback((node) => {\n      // console.log(`node`, node);\n      if (loading) return;\n\n      if (observer.current) observer.current.disconnect();\n\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setPageNumber((prev) => prev + 1);\n        }\n      });\n\n      if (node) observer.current.observe(node);\n    },\n    [loading, hasMore]\n  );\n\n  const handleSearch = (e) => {\n    setInputValue(e.target.value)\n  };\n\n  return (\n    <>\n      <Search onChange={handleSearch} inputValue={inputValue} />\n      <BookList lastBookElementRef={lastBookElementRef} books={books} />\n      {loading && <Loader/>}\n      {error && <div>{error}</div>}\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './base.css';\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}